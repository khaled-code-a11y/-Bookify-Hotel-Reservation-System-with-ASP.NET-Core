<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hotel - AmunraHotel</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="page-hotel">
    <header>
      <div class="block">
        <div class="logo">AmunraHotel</div>
        <nav id="navbar">
          <a href="index.html">Home</a>
          <a href="rooms.html">Rooms</a>
          <a href="index.html#Offers">Offers</a>
          <a href="index.html#about">About</a>
          <a href="dashboard.html" class="admin-dashboard-link">Dashboard</a>
        </nav>
        <div class="hamburger" id="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>

        <div class="actions">
          <div class="search-field-container">
            <button class="icon search-icon" id="toggleSearchBtn">üîç</button>
            <div class="search-input-wrap hidden" id="searchHeaderInput">
              <input type="text" id="headerSearchInput" placeholder="Search by hotel name...">
              <button class="close-search-btn" id="closeSearchInput">&times;</button>
              <div class="search-results-dropdown hidden" id="searchResults"></div>
            </div>
          </div>

          <div class="user-dropdown-container">
            <button class="icon user-icon" id="userIcon">üë§</button>

            <div class="user-dropdown-menu " id="userMenu">
              <a href="#" class="dropdown-item dashboard">
                <div class="user-info">
                  <img src="img/khaled.png" alt="User Avatar" class="user-avatar">
                  <div>
                    <span class="user-name">AmunraHotel</span>
                    <span class="user-email">user.AmunraHotel@gmail.com</span>
                  </div>
                </div>
              </a>

              <a href="#" class="dropdown-item" id="openManageModalLink"><i class="fas fa-cog"></i> Manage
                account</a>
              <a href="my-bookings.html" class="dropdown-item"><i class="fas fa-book"></i> My Bookings</a>
              <a href="index.html" class="dropdown-item sign-out"><i class="fas fa-sign-out-alt"></i> Sign
                out</a>

              <small class="secure-label">Secured by Amunra</small>
            </div>
          </div>

          <button class="login-btn" onclick="window.location.href='login.html'">Login</button>
        </div>
      </div>
    </header>

    <main style="padding-top:90px;">
      <div class="container" style="max-width:1100px;margin:0 auto;padding:40px 20px;color:#111;">
        <div id="hotel-page"></div>
      </div>
      <!DOCTYPE html>
      <html lang="en">

      <head>
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Hotel - AmunraHotel</title>
        <link rel="stylesheet" href="style.css" />
      </head>

      <body>
        <div class="page-hotel">
          <header>
            <div class="block">
              <div class="logo">AmunraHotel</div>
              <nav id="navbar">
                <a href="index.html">Home</a>
                <a href="rooms.html">Rooms</a>
                <a href="index.html#Offers">Offers</a>
                <a href="index.html#about">About</a>
                <a href="dashboard.html" class="admin-dashboard-link">Dashboard</a>
              </nav>
              <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
              </div>

              <div class="actions">
                <div class="search-field-container">
                  <button class="icon search-icon" id="toggleSearchBtn">üîç</button>
                  <div class="search-input-wrap hidden" id="searchHeaderInput">
                    <input type="text" id="headerSearchInput" placeholder="Search by hotel name...">
                    <button class="close-search-btn" id="closeSearchInput">&times;</button>
                    <div class="search-results-dropdown hidden" id="searchResults"></div>
                  </div>
                </div>

                <div class="user-dropdown-container">
                  <button class="icon user-icon" id="userIcon">üë§</button>

                  <div class="user-dropdown-menu " id="userMenu">
                    <a href="#" class="dropdown-item dashboard">
                      <div class="user-info">
                        <img src="img/khaled.png" alt="User Avatar" class="user-avatar">
                        <div>
                          <span class="user-name">AmunraHotel</span>
                          <span class="user-email">user.AmunraHotel@gmail.com</span>
                        </div>
                      </div>
                    </a>

                    <a href="#" class="dropdown-item" id="openManageModalLink"><i class="fas fa-cog"></i> Manage
                      account</a>
                    <a href="my-bookings.html" class="dropdown-item"><i class="fas fa-book"></i> My Bookings</a>
                    <a href="index.html" class="dropdown-item sign-out"><i class="fas fa-sign-out-alt"></i> Sign
                      out</a>

                    <small class="secure-label">Secured by Amunra</small>
                  </div>
                </div>

                <button class="login-btn" onclick="window.location.href='login.html'">Login</button>
              </div>
            </div>
          </header>

          <main style="padding-top:90px;">
            <div class="container" style="max-width:1100px;margin:0 auto;padding:40px 20px;color:#111;">
              <div id="hotel-page"></div>
            </div>
          </main>

        </div>

        <script src="api.js"></script>
        <script>
          // ===== ÿÆŸàÿßŸÜÿ© ÿßŸÑŸÄ query string =====
          function q(name) {
            return new URLSearchParams(location.search).get(name);
          }

          const roomId = q("id");

          async function loadRoomDetails() {
            const el = document.getElementById("hotel-page");

            if (!roomId) {
              el.innerHTML = '<div style="text-align:center;padding:50px;"><h2>Room ID missing</h2><a href="rooms.html" class="btn-primary">Back to Rooms</a></div>';
              return;
            }

            el.innerHTML = '<div style="text-align:center;padding:50px;">Loading room details...</div>';

            try {
              const room = await api.getRoomById(roomId);

              if (!room) {
                el.innerHTML = '<div style="text-align:center;padding:50px;"><h2>Room not found</h2><a href="rooms.html" class="btn-primary">Back to Rooms</a></div>';
                return;
              }

              const data = {
                title: `Room ${room.roomNumber} - ${room.roomType}`,
                location: "Amunra Hotel", // Static for now
                price: `$${room.price}`,
                desc: room.description || "No description available.",
                images: [
                  room.roomPhotoUrl || "img/default-room.jpg",
                  "img/visualsofdana-T5pL6ciEn-I-unsplash 1.png", // Fallback/Extra images
                  "img/chastity-cortijo-M8iGdeTSOkg-unsplash 1.png"
                ]
              };

              // ===== ŸÑŸàŸÉŸäÿ¥ŸÜ ÿπÿ¥Ÿàÿßÿ¶Ÿä ÿ≠ŸÇŸäŸÇŸä ÿπŸÑŸâ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ© =====
              const RANDOM_LOCATIONS = [
                { name: "Los Angeles, California, USA", lat: 34.0522, lon: -118.2437 },
                { name: "New York, NY, USA", lat: 40.7128, lon: -74.0060 },
                { name: "Chicago, Illinois, USA", lat: 41.8781, lon: -87.6298 },
                { name: "San Diego, California, USA", lat: 32.7157, lon: -117.1611 },
                { name: "Miami, Florida, USA", lat: 25.7617, lon: -80.1918 }
              ];
              const loc = RANDOM_LOCATIONS[Math.floor(Math.random() * RANDOM_LOCATIONS.length)];

              // ===== ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸáŸàÿ≥ÿ™ ŸàÿßŸÑÿ™ŸÇŸäŸäŸÖ =====
              const HOST_NAMES = ["Emma Rodriguez", "Olivia Brown", "Sophia Martinez", "Ava Wilson"];
              const hostName = HOST_NAMES[Math.floor(Math.random() * HOST_NAMES.length)];
              const rating = (4.5 + Math.random() * 0.5).toFixed(1);    // ŸÖŸÜ 4.5 ŸÑŸÄ 5.0
              const responseRate = "100%";
              const responseTime = "30 min";

              // ===== ÿßŸÑŸÄ HTML ŸÉŸÑŸá ÿ®ÿ™ÿßÿπ ÿßŸÑÿµŸÅÿ≠ÿ© ÿ¨ŸàŸëŸá ÿ≥ŸÉÿ±ÿ®ÿ™ =====
              el.innerHTML = `
          <!-- ÿßŸÑÿ¨ÿ≤ÿ° ÿßŸÑÿπŸÑŸàŸä: ÿµŸàÿ±ÿ© ŸÉÿ®Ÿäÿ±ÿ© + ŸÖÿπŸÑŸàŸÖÿßÿ™ -->
          <div class="hotel-top" style="display:flex;gap:30px;flex-wrap:wrap;align-items:flex-start;">
            <div style="flex:1;min-width:320px;">
              <img src="${data.images[0]}" alt="${data.title}"
                   style="width:100%;border-radius:12px;object-fit:cover;height:380px" onerror="this.src='img/default-room.jpg'">
            </div>

            <div style="flex:1;min-width:300px;">
              <h1 style="margin-bottom:8px;">${data.title}</h1>
              <p style="color:#6b7280;margin-bottom:8px;">${data.location}</p>
              <p style="color:#374151;margin-bottom:18px;">${data.desc}</p>

              <div style="display:flex;flex-wrap:wrap;gap:14px;align-items:center;margin-bottom:18px;">
                <div style="font-weight:800;font-size:22px;color:#111;">
                  ${data.price}
                  <span style="font-weight:500;font-size:14px;color:#6b7280">/day</span>
                </div>
                <a class="btn-primary" href="booking.html?id=${roomId}">Check Availability</a>
                <a class="btn-outline" href="rooms.html">Back to Rooms</a>
              </div>

              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:6px;">
                <span class="amenity" style="background:#f3f4f6;color:#111;padding:6px 10px;border-radius:8px">free wifi</span>
                <span class="amenity" style="background:#f3f4f6;color:#111;padding:6px 10px;border-radius:8px">free breakfast</span>
                <span class="amenity" style="background:#f3f4f6;color:#111;padding:6px 10px;border-radius:8px">room service</span>
              </div>
            </div>
          </div>

          <hr style="border-color:rgba(0,0,0,0.06);margin:28px 0;">

          <!-- ÿ¨ÿßŸÑŸäÿ±Ÿä ÿßŸÑÿµŸàÿ± ÿßŸÑÿµÿ∫Ÿäÿ±ÿ© -->
          <div class="gallery" style="display:flex;gap:12px;flex-wrap:wrap;">
            ${data.images
                  .map(
                    (src) =>
                      `<img src="${src}" style="width:32%;border-radius:10px;min-width:120px;object-fit:cover;height:140px" onerror="this.src='img/default-room.jpg'">`
                  )
                  .join("")}
          </div>

          <!-- ŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑÿ∫ÿ±ŸÅÿ© ÿ≤Ÿä ÿßŸÑŸÑŸä ŸÅŸä ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ£ŸàŸÑŸâ -->
          <section style="margin-top:30px;color:#374151;">
          <div style="display:flex;flex-direction:column;gap:18px;">
            
            <div style="display:flex;align-items:flex-start;gap:8px;">
              <span style="font-size:18px;">üè†</span>
              <div>
                <strong>Clean Room</strong>
                <p style="margin:2px 0;color:#6b7280;font-size:14px;">
                  You will have the clean room for you.
                </p>
              </div>
            </div>

            <div style="display:flex;align-items:flex-start;gap:8px;">
              <span style="font-size:18px;">‚úÖ</span>
              <div>
                <strong>Enhanced Clean</strong>
                <p style="margin:2px 0;color:#6b7280;font-size:14px;">
                  This host has committed to AmunraHotel's cleaning process.
                </p>
              </div>
            </div>

            <div style="display:flex;align-items:flex-start;gap:8px;">
              <span style="font-size:18px;">üìç</span>
              <div>
                <strong>Great location</strong>
                <p style="margin:2px 0;color:#6b7280;font-size:14px;">
                  90% of recent guests gave the location a 5-star rating.
                </p>
              </div>
            </div>

            <div style="display:flex;align-items:flex-start;gap:8px;">
              <span style="font-size:18px;">‚ù§</span>
              <div>
                <strong>Great check-in experience</strong>
                <p style="margin:2px 0;color:#6b7280;font-size:14px;">
                  100% of recent guests gave the check-in process a 5-star rating.
                </p>
              </div>
            </div>

          </div>
        </section>

          <!-- Location on map -->
          <section style="margin-top:30px;">
            <h3 style="margin-bottom:6px;">Location on map</h3>
            <p style="color:#6b7280;margin-bottom:15px;">${loc.name}</p>

            <div style="border-radius:12px;overflow:hidden;border:1px solid #e5e7eb;">
              <iframe
                src="https://www.google.com/maps?q=${loc.lat},${loc.lon}&z=14&output=embed"
                width="100%" height="320"
                style="border:0;" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            </div>
          </section>

          <!-- ÿ™ŸÇŸäŸäŸÖ ÿßŸÑŸáŸàÿ≥ÿ™ ÿ™ÿ≠ÿ™ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ© ÿ≤Ÿä ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿßŸÜŸäÿ© -->
          <section style="margin-top:25px;display:flex;align-items:center;gap:20px;flex-wrap:wrap;">
            
            <button style="
                padding:12px 26px;
                background:#0078ff;
                color:#fff;
                border:none;
                border-radius:8px;
                font-size:15px;
                font-weight:600;
                cursor:pointer;">
              Contact Now
            </button>

            <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
              <img src="img/khaled.png"
                   style="width:55px;height:55px;border-radius:50%;object-fit:cover;">
              <div>
                <p style="margin:0;color:#6b7280;font-size:13px;">Hosted by</p>
                <p style="margin:0;font-weight:600;">${hostName}</p>
                <p style="margin:2px 0;color:#6b7280;font-size:13px;">
                  ‚≠ê ${rating} ¬∑ 200+ reviews
                </p>
              </div>
            </div>

            <div style="margin-left:auto;font-size:13px;color:#6b7280;">
              <p style="margin:0;">Response rate: <strong>${responseRate}</strong></p>
              <p style="margin:2px 0 0;">Response time: <strong>${responseTime}</strong></p>
            </div>
          </section>

          <!-- ÿ≥ŸäŸÉÿ¥ŸÜ ÿ®ÿ≥Ÿäÿ∑ ÿ™ÿ≠ÿ™ ÿÆÿßŸÑÿµ -->
          <section style="margin-top:28px;color:#374151;">
            <h3>Experience Luxury Like Never Before</h3>
            <p style="color:#6b7280;margin-top:8px;">Amenities and highlights</p>
            <ul style="margin-top:12px;color:#555;">
              <li>Free WiFi, Breakfast included</li>
              <li>Spa & Gym access</li>
              <li>24/7 Room service</li>
            </ul>
          </section>
        `;

              // ÿ™ÿ≠ÿØŸäÿ´ ÿπŸÜŸàÿßŸÜ ÿßŸÑÿµŸÅÿ≠ÿ©
              document.title = data.title + " ‚Äî AmunraHotel";

            } catch (error) {
              console.error(error);
              el.innerHTML = '<div style="text-align:center;padding:50px;"><h2>Error loading room details</h2><a href="rooms.html" class="btn-primary">Back to Rooms</a></div>';
            }
          }

          loadRoomDetails();

        </script>

        <script src="main.js"></script>
      </body>

      </html>